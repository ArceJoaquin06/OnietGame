// Variables
let player;
let Pimg1, Pimg2, Pimg3;
let isJumping = false; 
let walkFrame = 0; // Para alternar entre imágenes al caminar
let walkSpeed = 5; // Velocidad de movimiento
let menu = true;
let bricks, tilesGroup;
let fondoImg

function preload() {
	
	
	Pimg1.loadImage()
	Pimg2.loadImage()
	Pimg3.loadImage()

	fondoImg.loadImage("/juego.png");



}

function setup() {
	new Canvas(1500, 800);
	
	// Gravedad


	// logica de los ladrillos
	bricks = new Group();
	bricks.w = 30;
	bricks.h = 30;
	bricks.visible = false;
	bricks.collider = 'static';
	bricks.tile = '=';

	fire = new Group();
	fire.w = 5;
	fire.h = 2;
	fire.visible = false;
	fire.tile = 'f'

	meteor = new Group();
	meteor.r = 10;
	meteor.visible = false;
	meteor.tile = 'm'

	tilesGroup = new Tiles(
		[
			'=.............',
			'=.............',
			'=.............',
			'=.............',
			'=.............',
			'=..................................======..........................................................................................................................................................................',
			'=.................................==.................m...............................................................................................................................................................................',
			'=................................==...............................................................................................................................................====..........................',
			'=...............................==...............................................................................................................................................=====...........................',
			'=..............................==.....................................................................m.....=====...............................................................============.....========.................................',
			'=.............................==.........................................m.................................=======...................................................m.........=====.............========.................========...========....====.......................====.............====.......................................',
			'=............................==..................m........................................................=========....................m................m.....................====...............========....========.....========...========....====..................====.........................====.......',
			'=..........................==............................................................................===========.........................................................====................========....========.....========...========....====....====....========..........====...........====...................',
			'==........................=.................................===========......===============............=============.........................m...........m.................====.................========....========.....========...========....====....====...====......................====....................',
			'===......................=..fffffffffffffffff...............===========ffffff===============...........===============............................................m........===fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff........................',
			'================================================================================================================================================================================================================================================================================================================================'
		],
		1,
		1,
		bricks.w + 1, //para separar un poquito los bricks
		bricks.h + 1
	);
}

function draw() {
	if (menu) {
		showMenu(); // Muestra el menú
	} else {
		background('skyblue'); // Color del fondo del juego
		

	}
}

// Mostrar el menú
function showMenu() {
	background("blue"); // Mostrar color de fondo del menú
	fill(255); // Texto blanco
	textSize(32);
	textAlign(CENTER);
	text("Presiona 'J' para comenzar", width / 2, height / 2); // Mensaje en el menú

	// Cambiar al juego al presionar 'J'
	if (keyIsPressed && key === 'j') {
		menu = false; // Salir del menú
	}
}
